function mysql_dt_to_js_date(t){var r=t.split(/[- :]/);return new Date(r[0],r[1]-1,r[2],r[3],r[4],r[5])}function usurp(t){for(var r=t,e=t.childNodes.length-1;e>=0;e--){var n=t.removeChild(t.childNodes[e]);t.parentNode.insertBefore(n,r),r=n}t.parentNode.removeChild(t)}function sanitize(t){for(var r=Array.prototype.slice.apply(t.getElementsByTagName("*"),[0]),e=0;e<r.length;e++)-1==ALLOWED_TAGS.indexOf(r[e].nodeName)&&usurp(r[e])}function sanitizeString(t){var r=document.createElement("div");return r.innerHTML=t,sanitize(r),r.innerHTML}function encode_urls_emails(t){var r=/(<a href(?:(?!<\/a\s*>).)*)?([\w.-]+@[\w.-]+\.[\w.-]+)/gi;t.html(t.html().replace(r,function(t,r){return r?t:'<a href="mailto:'+t+'"  contenteditable="false">'+t+"</a>"}));var r=/(<a href(?:(?!<\/a\s*>).)*)?(http\S+)/gi;t.html(t.html().replace(r,function(t,r){return t=t.replace("&nbsp;",""),r?t:'<a href="'+$.trim(t)+'"  contenteditable="false" target="_blank">'+$.trim(t)+"</a>"}))}function get_screen_size(){return $("#screen-size :visible").attr("data-size")}function obj_to_arr(t){return $.map(t,function(t,r){return[t]})}function format_hours(t){if(0==t)return"0<small>h</small>";var r=Math.round(60*t),e=Math.floor(r/480),n=r%480,s=Math.floor(n/60),a=n%60,o=Math.floor(a),i="";return e>0&&(i+="{0}<small>d</small>".sprintf(e)),s>0&&(i+="{0}<small>h</small>".sprintf(s)),o>0&&(i+="{0}<small>m</small>".sprintf(o)),""===i&&(i=format_hours(0)),i}function show_growl_msg(t){try{$.bootstrapGrowl(t.data.message,{type:"info",allow_dismiss:!0})}catch(r){}}function add_task_to_status_col(t){"undefined"==typeof t.estimate_id&&(t.estimate_id=0),"undefined"==typeof t.project_id?t.project_id=0:"undefined"==typeof board.project_records[t.project_id]&&(t.project_id=0),"undefined"==typeof t.user_id_assigned?t.user_id_assigned=0:"undefined"==typeof board.allowed_users()[t.user_id_assigned]&&(t.user_id_assigned=0),"undefined"!=typeof board.status_records()[t.status_id]&&(t.status_color=board.status_records()[t.status_id].color_hex),"undefined"==typeof t.hour_count&&(t.hour_count=0);var r=$(t_card.render({task:t,settings:board.settings(),current_user_can_write:current_user_has_cap("write")}));return r.prependTo("#status-{0}-tasks".sprintf(t.status_id)).board_task(t),$(".col-tasks").matchHeight(),r}function current_user_has_cap(t){return user_has_cap(t,board.current_user())}function user_has_cap(t,r){try{return r.caps.indexOf(t)<0?!1:!0}catch(e){return!1}}function records_by_position(t){var r=$.map(t,function(t,r){return[t]});return r.sort(function(t,r){return t.position-r.position}),r}var t_col_status=new t($("#t-col-status").html()),t_col_tasks=new t($("#t-col-tasks").html()),t_card=new t($("#t-card").html()),t_card_project=new t($("#t-card-project").html()),t_card_user_assigned_to=new t($("#t-card-user-assigned-to").html()),t_card_task_hours=new t($("#t-card-task-hours").html()),t_card_estimate=new t($("#t-card-estimate").html()),t_card_users_dropdown=new t($("#t-card-users-dropdown").html()),t_card_estimates_dropdown=new t($("#t-card-estimates-dropdown").html()),t_card_projects_dropdown=new t($("#t-card-projects-dropdown").html()),t_modal_projects_panel=new t($("#t-modal-projects-panel").html()),sidebar_w,$last_clicked,timers=[];String.prototype.sprintf=function(){var t=this;for(var r in arguments)t=t.replace("{"+r+"}",arguments[r]);return t},String.prototype.stripslashes=function(){return(this+"").replace(/\\(.?)/g,function(t,r){switch(r){case"\\":return"\\";case"0":return"\x00";case"":return"";default:return r}})},Number.prototype.padZero=function(t){var r=String(this),e="0";for(t=t||2;r.length<t;)r=e+r;return r},Object.size=function(t){var r=0,e;for(e in t)t.hasOwnProperty(e)&&r++;return r};var ALLOWED_TAGS=["STRONG","EM","BR"];